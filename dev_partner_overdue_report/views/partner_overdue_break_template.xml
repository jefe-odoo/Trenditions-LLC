<?xml version="1.0" encoding="utf-8"?>
<!--
Copyright (C) 2015 DevIntelle Consulting Service Pvt.Ltd (<http://www.devintellecs.com>).

For Module Support : devintelle@gmail.com  or Skype : devintelle 
 -->
<odoo>
    <template id="dev_print_overdue_break_template">
            <t t-call="dev_partner_overdue_report.dev_partner_overdue_layout">
                <div class="page">
                	<style>
		                .header_table{
		                    width:100%;
		                }
		                .header_table th{
		                    padding:5px;
		                    text-align:center;
		                    border:1px solid black;
		                    background:#c8cace;
		                }
		                .header_table td{
		                    padding:5px;
		                    text-align:center;
		                    border:1px solid black;
		                }
		                .my_table{
		                    width:100%;
		                    font-size:11px;}
		                    
		                .my_table th{
		                    padding:5px;
		                    background:#eff2f7;
		                    border-bottom:1px solid #000;
		                }
		                .my_table td{
		                    padding:5px;
		                    border-bottom:1px solid #efefef;
		                }
		            </style>
					<t t-set="lines" t-value="get_lines(o)"/>
					<div class="row">
					    <t t-if="o.target_move == 'posted'">
					        <span style="font-size:14px;padding:5px;">Analysis Type : Posted</span>
					    </t>
					    <t t-if="o.target_move == 'all'">
					        <span style="font-size:14px;padding:5px;">Analysis Type : All</span>
					    </t>
					</div>
					<div class="row">
						<table class="my_table">
							<thead>
								<tr>
									<th style="width:08%">Date</th>
									<th style="width:18%" class="text-center">Reference</th>
									<th style="width:08%" class="text-center">Due Date</th>
									<th style="width:08%" class="text-right">Inv Amt</th>
									<th style="width:08%" class="text-right">Paid Amt</th>
									<th style="width:10%" class="text-right">Remaining Amt</th>
									<th style="width:08%" class="text-right">O/S Amt</th>
									<th style="width:08%" class="text-right"><span t-esc="get_label()[0]"/></th>
									<th style="width:08%" class="text-right"><span t-esc="get_label()[1]"/></th>
									<th style="width:08%" class="text-right"><span t-esc="get_label()[2]"/></th>
									<th style="width:08%" class="text-right"> Older </th>
								</tr>
							</thead>
							<tbody class="sale_tbody">
							    <t t-set="f_not_due" t-value="0"/>
								<t t-set="f_f" t-value="0"/>
								<t t-set="f_s" t-value="0"/>
								<t t-set="f_t" t-value="0"/>
								<t t-set="f_fo" t-value="0"/>
								<t t-set="f_inv_amt" t-value="0"/>
								<t t-set="f_paid_amt" t-value="0"/>
								<t t-set="f_remaining_amt" t-value="0"/>
								<t t-foreach="lines" t-as="l_line">
									<tr style="page-break-inside: avoid">
										<td colspan="11">
											<b><span t-esc="get_partner_name(l_line.get('partner_id'))"/></b>
										</td>
									</tr>
									<t t-set="not_due" t-value="0"/>
									<t t-set="f" t-value="0"/>
									<t t-set="s" t-value="0"/>
									<t t-set="t" t-value="0"/>
									<t t-set="fo" t-value="0"/>
									<t t-set="inv_amt" t-value="0"/>
								    <t t-set="paid_amt" t-value="0"/>
								    <t t-set="remaining_amt" t-value="0"/>
									<t t-foreach="l_line.get('values')" t-as="line">
										<t t-set="not_due" t-value="not_due + line.get('not_due')"/>
										<t t-set="f" t-value="f + line.get('0_30')"/>
										<t t-set="s" t-value="s + line.get('31_60')"/>
										<t t-set="t" t-value="t + line.get('61_90')"/>
										<t t-set="fo" t-value="fo + line.get('91_120')"/>
										<t t-set="inv_amt" t-value="inv_amt + line.get('inv_amount')"/>
										<t t-set="remaining_amt" t-value="remaining_amt + line.get('remaining_amount')"/>
										<t t-set="paid_amt" t-value="paid_amt + line.get('inv_amount') - line.get('remaining_amount')"/>
										<tr style="page-break-inside: avoid">
											
											<td>
											    <t t-if="line.get('date')">
											        <span t-esc="line.get('date')"/>
											    </t>
											</td>
											<td class="text-center"><span t-esc="line.get('invoice_number')"/></td>
											<td class="text-center">
											    <t t-if="line.get('date_due')">
											        <span t-esc="line.get('date_due')"/>
											    </t>
											</td>
											<td class="text-right">
												<span t-esc="line.get('inv_amount')" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/>
											</td>
											<td class="text-right">
												<span t-esc="line.get('inv_amount') - line.get('remaining_amount')" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/>
											</td>
											<td class="text-right">
												<span t-esc="line.get('remaining_amount')" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/>
											</td>
											<td class="text-right">
												<span t-esc="line.get('not_due')" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/>
												</td>
											<td class="text-right">
												<span t-esc="line.get('0_30')" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/>
											</td>
											<td class="text-right">
												<span t-esc="line.get('31_60')" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/>
											</td>
											<td class="text-right">
												<span t-esc="line.get('61_90')" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/>
											</td>
											<td class="text-right">
												<span t-esc="line.get('91_120')" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/>
											</td>
										</tr>
									</t>
									<tr style="border-top:1px solid black;font-weight:bold">
									        <t t-set="f_not_due" t-value="not_due + f_not_due"/>
										    <t t-set="f_f" t-value="f + f_f"/>
										    <t t-set="f_s" t-value="s + f_s"/>
										    <t t-set="f_t" t-value="t + f_t"/>
										    <t t-set="f_fo" t-value="fo + f_fo"/>
										    <t t-set="f_inv_amt" t-value="inv_amt + f_inv_amt"/>
										    <t t-set="f_remaining_amt" t-value="remaining_amt + f_remaining_amt"/>
										    <t t-set="f_paid_amt" t-value="paid_amt + f_paid_amt"/>
											<td colspan="3" class="text-right" >
											</td>
											<td class="text-right">
												<b><span t-esc="inv_amt" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/></b>
											</td>
											<td class="text-right">
												<b><span t-esc="paid_amt" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/></b>
											</td>
											<td class="text-right">
												<b><span t-esc="remaining_amt" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/></b>
											</td>
											<td class="text-right">
												<b><span t-esc="not_due" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/></b>
											</td>
											<td class="text-right">
												<span t-esc="f" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/>
											</td>
											<td class="text-right">
												<span t-esc="s" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/>
											</td>
											<td class="text-right">
												<span t-esc="t" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/>
											</td>
											<td class="text-right">
												<span t-esc="fo" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/>
											</td>
											
										</tr>
								</t>
								<tr style="border-top:1px solid black;font-weight:bold">
											<td colspan="3" class="text-right" >
												<b>TOTAL</b>
											</td>
											<td class="text-right">
												<b><span t-esc="f_inv_amt" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/></b>
											</td>
											<td class="text-right">
												<b><span t-esc="f_paid_amt" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/></b>
											</td>
											<td class="text-right">
												<b><span t-esc="f_remaining_amt" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/></b>
											</td>
											<td class="text-right">
												<b><span t-esc="f_not_due" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/></b>
											</td>
											<td class="text-right">
												<span t-esc="f_f" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/>
											</td>
											<td class="text-right">
												<span t-esc="f_s" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/>
											</td>
											<td class="text-right">
												<span t-esc="f_t" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/>
											</td>
											<td class="text-right">
												<span t-esc="f_fo" 
													t-options='{"widget": "monetary", 
														"display_currency":o.company_id.currency_id}'/>
											</td>
											
										</tr>
							</tbody>
						</table>
					</div>
                </div>
            </t>

    </template>
    
    <template id="dev_print_overdue_break">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="dev_partner_overdue_report.dev_print_overdue_break_template"/>
            </t>
        </t>
    </template>
    
    
</odoo>
